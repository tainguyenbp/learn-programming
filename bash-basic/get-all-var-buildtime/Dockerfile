# Stage 1
ARG NODE_VERSION=1.16
ARG ALPINE_VERSION=3.18

ARG NODE_BUILDER_IMAGE="node:${NODE_VERSION}"
ARG ALPINE_BUILDER_IMAGE="alpine:${ALPINE_VERSION}"

FROM ${NODE_BUILDER_IMAGE} AS builder
RUN apk add --no-cache yarn
ARG ENV
ARG DOMAIN
ARG HOST
ARG PORT

# Stage 2
FROM ${ALPINE_BUILDER_IMAGE}
COPY --from=builder /app /app
ARG ENV
ARG DOMAIN
ARG HOST
ARG PORT
